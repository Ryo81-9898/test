<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>必修問題集</title>
	<link rel="stylesheet" th:href="@{/css/style.css}" />
	<link rel="stylesheet" th:href="@{/css/quizzes.css}" />

	<!-- zen-maru-gothic-regular -->
	<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic&display=swap" rel="stylesheet">
	<!-- 外部JSファイルの読み込み -->
	<script th:src="@{/js/quizzes.js}" defer></script>
	<script th:src="@{/js/style.js}" defer></script>
	<!-- Font Awesome CDN 読み込み -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>

<body>
	<!-- ✅ 共通のヘッダーを読み込む -->
	<div th:replace="fragments/header :: commonHeader"></div>

	<div class="zen-maru-gothic-regular">
		<h2 class="quizzes-title" th:text="|必修問題 ( ${no}問 )|">必修問題（</h2>

		<div class="start-button-container">
			<div id="timer-option">
				<label for="timerCheckbox">
					<input type="checkbox" id="timerCheckbox" checked />
					⏱ 時間を測る</label>
			</div>

			<!-- スタートボタン -->
			<button id="startButton" onclick="startQuiz()" class="start-button btn">Start</button>
		</div>
		<!-- 問題セクション（初期状態で非表示） -->
		<div id="quiz-section">
			<form th:action="@{/result}" method="post">
				<div class="quiz-card" th:each="q, s : ${quizList}" th:style="|animation-delay: ${s.count * 0.2}s|">
					<div class="quiz-question">
						<p>問題[[${s.count}]]：[[${q.question}]]</p>
						<p th:text="|（第${q.testNumber.testNumberId}回 ${q.time.time}問題 ${q.questionNumber}）|"
							class="question-meta"></p>
					</div>


					<input type="radio" th:id="|q${s.count}-a1|" th:name="|userAnswerQuestionNo${s.count}|"
						th:value="1" />
					<label th:for="|q${s.count}-a1|">1. [[${q.choice1}]]</label>

					<input type="radio" th:id="|q${s.count}-a2|" th:name="|userAnswerQuestionNo${s.count}|"
						th:value="2" />
					<label th:for="|q${s.count}-a2|">2. [[${q.choice2}]]</label>

					<input type="radio" th:id="|q${s.count}-a3|" th:name="|userAnswerQuestionNo${s.count}|"
						th:value="3" />
					<label th:for="|q${s.count}-a3|">3. [[${q.choice3}]]</label>

					<input type="radio" th:id="|q${s.count}-a4|" th:name="|userAnswerQuestionNo${s.count}|"
						th:value="4" />
					<label th:for="|q${s.count}-a4|">4. [[${q.choice4}]]</label>


					<div th:if="${q.choice5 != null}">
						<input type="radio" th:id="|q${s.count}-a5|" th:name="|userAnswerQuestionNo${s.count}|"
							th:value="5" />
						<label th:for="|q${s.count}-a5|">5. [[${q.choice5}]]</label>
					</div>
				</div>


				<!--	サイドバー（初期状態で非表示）-->
				<div class="sidebar">
					<!--	ストップウォッチ-->
					<div id="timerDisplay" class="hidden">
						経過時間:<span id="time">00分00秒</span>
					</div>

					<!--	 解答送信ボタン -->
					<button id="submit-button" class="zen-maru-gothic-regular" type="submit">Finish</button>
				</div>
			</form>
		</div>
	</div>
	<!--	トップへ戻るボタン-->
	<div th:replace="fragments/backToTop :: #back-to-top"></div>
</body>

</html>