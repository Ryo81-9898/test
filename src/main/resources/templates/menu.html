<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>メニュー</title>
	<link rel="stylesheet" th:href="@{/css/style.css}" />
	<link rel="stylesheet" th:href="@{/css/menu.css}" />
	<script th:src="@{/js/menu.js}" defer></script>

</head>

<body>
	<header class="top-header">
		<!--自動ログアウト時のメッセージ-->
		<div th:if="${param.timeout}" id="menuErrorMessage" class="error-message">
			<div>⚠️</div>
			<div>
				セッションがタイムアウトしました。再度ログインしてください。
			</div>
		</div>

		<!-- 未ログイン状態で表示されるログインボタン -->
		<div sec:authorize="isAnonymous()">
			<a th:href="@{/login}" class="btn coral">ログイン</a>
		</div>

		<!--ログイン中の表示-->
		<div sec:authorize="isAuthenticated()" class="user-info">
			<div class="display-name" th:text="${#authentication.principal.displayname}">
				新たに追加したディスプレイネームに置き換わる
			</div>
		<!--ログアウト-->
			<form th:action="@{/logout}" method="post">
				<button type="submit" class="btn lavender">ログアウト</button>
			</form>
		</div>
	</header>


	<h2>メニュー画面</h2>
	<hr>
	<div sec:authentication="name">
		Usernameがname値に置き換わる
	</div>
<!--	<div sec:authorize="isAuthenticated()">-->
<!--		<div th:text="${#authentication.principal.displayname}">-->
<!--			新たに追加したディスプレイネームに置き換わる-->
<!--		</div>-->
<!--	</div>-->
	<a th:href="@{challenge/5}">
		<button type="button">5問チャレンジ</button>
	</a>
	<a th:href="@{challenge/10}">
		<button type="button">10問チャレンジ</button>
	</a>
	<hr>
	<div th:if="${param.logout}">
		<p style="color: blue;">ログアウトしました</p>
	</div>

	<div sec:authorize="isAuthenticated()">
		<div sec:authorize="hasAuthority('ADMIN')">
			管理者のみ表示<br>
			<a th:href="@{form}">
				<button type="button">問題の新規登録</button>
			</a>
			<a th:href="@{list}">
				<button type="button">登録済み問題一覧表示</button>
			</a>
			<form th:action="@{pickUp}" method="get">
				<label for="enterId">問題のID検索</label>
				<input type="number" id="enterId" name="id" min="1" th:max="${maxId}">
				<button type="submit">検索</button>
			</form>
		</div>

		<div sec:authorize="hasAuthority('USER')">
			成績表を作る
		</div>


	</div>

</body>

</html>