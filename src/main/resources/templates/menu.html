<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>メニュー</title>
	<link rel="stylesheet" th:href="@{/css/style.css}" />
	<link rel="stylesheet" th:href="@{/css/menu.css}" />
	<script th:src="@{/js/menu.js}" defer></script>
	
	<!-- Poppinsフォントを読み込む -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic&display=swap" rel="stylesheet">
</head>

<body>
	<header class="top-header">
		<!--自動ログアウト時のメッセージ-->
		<div th:if="${param.timeout}" id="menuErrorMessage" class="error-message">
			<div>⚠️</div>
			<div>
				セッションがタイムアウトしました。再度ログインしてください。
			</div>
		</div>

		<!-- 未ログイン状態で表示されるログインボタン -->
		<div sec:authorize="isAnonymous()">
			<a th:href="@{/login}" class="btn coral">ログイン</a>
		</div>

		<!--ログイン中の表示-->
		<div sec:authorize="isAuthenticated()" class="user-info">
			<div class="display-name" th:text="${#authentication.principal.displayname}">
				新たに追加したディスプレイネームに置き換わる
			</div>
			<!--ログアウト-->
			<form th:action="@{/logout}" method="post">
				<button type="submit" class="btn lavender">ログアウト</button>
			</form>
		</div>
	</header>


	<div class="zen-maru-gothic-regular">
		<p class="menu-title1">看護師国家試験</p>
		<p class="menu-title2">必修問題対策</p>
	</div>

	
	<div class="menu-buttons zen-maru-gothic-regular">
	    <a th:href="@{challenge/5}" class="btn " data-message="まずは5問から気軽にスタート！">
	        <span class="number">5問</span>
	        <span class="label">チャレンジ</span>
	    </a>
	    <a th:href="@{challenge/10}" class="btn" data-message="少し本気で取り組みたいあなたへ！">
	        <span class="number">10問</span>
	        <span class="label">チャレンジ</span>
	    </a>
	    <a th:href="@{challenge/25}" class="btn" data-message="必修問題半日分の問題数に挑戦できる！">
	        <span class="number">25問</span>
	        <span class="label">チャレンジ</span>
	    </a>
	    <a th:href="@{challenge/50}" class="btn" data-message="本番の国家試験の必修問題数にチャレンジ！">
	        <span class="number">50問</span>
	        <span class="label">チャレンジ</span>
	    </a>
	</div>
	<div id="hover-message" class="hover-message"></div>
















	<div th:if="${param.logout}">
		<p style="color: blue;">ログアウトしました</p>
	</div>

	<div sec:authorize="isAuthenticated()">
		<div sec:authorize="hasAuthority('ADMIN')">
			管理者のみ表示<br>
			<a th:href="@{form}">
				<button type="button">問題の新規登録</button>
			</a>
			<a th:href="@{list}">
				<button type="button">登録済み問題一覧表示</button>
			</a>
			<form th:action="@{pickUp}" method="get">
				<label for="enterId">問題のID検索</label>
				<input type="number" id="enterId" name="id" min="1" th:max="${maxId}">
				<button type="submit">検索</button>
			</form>
		</div>

		<div sec:authorize="hasAuthority('USER')">
			成績表を作る
		</div>


	</div>

</body>

</html>